<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>sqs-worker.components.database.interface documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version">main</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>Intro</span></div></a></li><li class="depth-1 "><a href="messages.html"><div class="inner"><span>Messages</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sqs-worker</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>components</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>database</span></div></div></li><li class="depth-4 current"><a href="sqs-worker.components.database.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>env</span></div></div></li><li class="depth-4"><a href="sqs-worker.components.env.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>hint</span></div></div></li><li class="depth-4"><a href="sqs-worker.components.hint.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>http</span></div></div></li><li class="depth-4"><a href="sqs-worker.components.http.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>iterable</span></div></div></li><li class="depth-4"><a href="sqs-worker.components.iterable.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>jetty</span></div></div></li><li class="depth-4"><a href="sqs-worker.components.jetty.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>json</span></div></div></li><li class="depth-4"><a href="sqs-worker.components.json.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>log</span></div></div></li><li class="depth-4"><a href="sqs-worker.components.log.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>malli</span></div></div></li><li class="depth-4"><a href="sqs-worker.components.malli.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>patient</span></div></div></li><li class="depth-4"><a href="sqs-worker.components.patient.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>s3</span></div></div></li><li class="depth-4"><a href="sqs-worker.components.s3.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>sqs-worker</span></div></div></li><li class="depth-4"><a href="sqs-worker.components.sqs-worker.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>sqs</span></div></div></li><li class="depth-4"><a href="sqs-worker.components.sqs.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-db-conf-spec"><div class="inner"><span>db-conf-spec</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-db-spec"><div class="inner"><span>db-spec</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-sql-params-spec"><div class="inner"><span>sql-params-spec</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-delete.21"><div class="inner"><span>delete!</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-execute.21"><div class="inner"><span>execute!</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-execute-one.21"><div class="inner"><span>execute-one!</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-execute-raw.21"><div class="inner"><span>execute-raw!</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-get-all"><div class="inner"><span>get-all</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-get-by"><div class="inner"><span>get-by</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-insert.21"><div class="inner"><span>insert!</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-insert-multi.21"><div class="inner"><span>insert-multi!</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-query"><div class="inner"><span>query</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-query-one"><div class="inner"><span>query-one</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-start.21"><div class="inner"><span>start!</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-stop.21"><div class="inner"><span>stop!</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-update.21"><div class="inner"><span>update!</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-upsert.21"><div class="inner"><span>upsert!</span></div></a></li><li class="depth-1"><a href="sqs-worker.components.database.interface.html#var-upsert-multi.21"><div class="inner"><span>upsert-multi!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">sqs-worker.components.database.interface</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-db-conf-spec"><h3>db-conf-spec</h3><div class="usage"></div><div class="doc"><div class="markdown"><pre><code>[:map [:host :string]
      [:port [:or :string :int]]
      [:db :string]
      [:user :string]
      [:password :string]
      [:ssl [:or :string :boolean]]]
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L11">view source</a></div></div><div class="public anchor" id="var-db-spec"><h3>db-spec</h3><div class="usage"></div><div class="doc"><div class="markdown"><pre><code>[:map [:connectable [:inst? com.zaxxer.hikari.HikariDataSource]]]
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L7">view source</a></div></div><div class="public anchor" id="var-sql-params-spec"><h3>sql-params-spec</h3><div class="usage"></div><div class="doc"><div class="markdown"><pre><code>[:cat :string [:* :any]]
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L20">view source</a></div></div><div class="public anchor" id="var-delete.21"><h3>delete!</h3><div class="usage"><code>(delete! connectable table where-clause)</code></div><div class="doc"><div class="markdown"><p>Deletes rows in table matching where-clause</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(connectable :- db-spec)
 (table :- :keyword)
 (where-clause :- [:vector :any])]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>:map
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L81">view source</a></div></div><div class="public anchor" id="var-execute.21"><h3>execute!</h3><div class="usage"><code>(execute! connectable honey-sql)</code></div><div class="doc"><div class="markdown"><p>Executes honey-sql query.</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(connectable :- db-spec)
 (honey-sql :- :map)]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>[:sequential :map]
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L31">view source</a></div></div><div class="public anchor" id="var-execute-one.21"><h3>execute-one!</h3><div class="usage"><code>(execute-one! connectable honey-sql)</code></div><div class="doc"><div class="markdown"><p>Executes honey-sql query and returns one result.</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(connectable :- db-spec)
 (honey-sql :- :map)]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>:map
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L37">view source</a></div></div><div class="public anchor" id="var-execute-raw.21"><h3>execute-raw!</h3><div class="usage"><code>(execute-raw! connectable sql-params)</code></div><div class="doc"><div class="markdown"><p>Executes raw jdbc sql in the form: <code>[&lt;query-str&gt; param1 param2 ..]</code>.</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(connectable :- db-spec)
 (sql-params :- sql-params-spec)]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>[:sequential :map]
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L25">view source</a></div></div><div class="public anchor" id="var-get-all"><h3>get-all</h3><div class="usage"><code>(get-all connectable table)</code></div><div class="doc"><div class="markdown"><p>Returns all rows from table.</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(connectable :- db-spec)
 (table :- :keyword)]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>[:sequential :map]
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L108">view source</a></div></div><div class="public anchor" id="var-get-by"><h3>get-by</h3><div class="usage"><code>(get-by connectable table column value)</code></div><div class="doc"><div class="markdown"><p>Queries table for rows where column matches value.</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(connectable :- db-spec)
 (table :- :keyword)
 (column :- :keyword)
 (value :- :any)]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>:map
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L100">view source</a></div></div><div class="public anchor" id="var-insert.21"><h3>insert!</h3><div class="usage"><code>(insert! connectable table key-map)</code></div><div class="doc"><div class="markdown"><p>Inserts key-map into table.</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(connectable :- db-spec)
 (table :- :keyword)
 (key-map :- :map)]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>:map
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L43">view source</a></div></div><div class="public anchor" id="var-insert-multi.21"><h3>insert-multi!</h3><div class="usage"><code>(insert-multi! connectable table key-maps)</code></div><div class="doc"><div class="markdown"><p>Inserts key-maps into table.</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(connectable :- db-spec)
 (table :- :keyword)
 (key-maps :- [:vector :map])]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>[:sequential :map]
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L50">view source</a></div></div><div class="public anchor" id="var-query"><h3>query</h3><div class="usage"><code>(query connectable honey-sql)</code></div><div class="doc"><div class="markdown"><p>Queries using honey-sql query.</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(connectable :- db-spec)
 (honey-sql :- :map)]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>[:sequential :map]
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L88">view source</a></div></div><div class="public anchor" id="var-query-one"><h3>query-one</h3><div class="usage"><code>(query-one connectable honey-sql)</code></div><div class="doc"><div class="markdown"><p>Queries one row using honey-sql query.</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(connectable :- db-spec)
 (honey-sql :- :map)]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>:map
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L94">view source</a></div></div><div class="public anchor" id="var-start.21"><h3>start!</h3><div class="usage"><code>(start! db-conf)</code></div><div class="doc"><div class="markdown"><p>Starts the db component.</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(db-conf :- db-conf-spec)]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>[:map [:connectable [:inst? com.zaxxer.hikari.HikariDataSource]]]
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L116">view source</a></div></div><div class="public anchor" id="var-stop.21"><h3>stop!</h3><div class="usage"><code>(stop! db)</code></div><div class="doc"><div class="markdown"><p>Stops db.</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(db :- db-spec)]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>:nil
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L121">view source</a></div></div><div class="public anchor" id="var-update.21"><h3>update!</h3><div class="usage"><code>(update! connectable table key-map where-clause)</code></div><div class="doc"><div class="markdown"><p>Updates table rows matching where-clause with key-map.</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(connectable :- db-spec)
 (table :- :keyword)
 (key-map :- :map)
 (where-clause :- [:vector :any])]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>:map
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L73">view source</a></div></div><div class="public anchor" id="var-upsert.21"><h3>upsert!</h3><div class="usage"><code>(upsert! connectable table on-conflict key-map)</code></div><div class="doc"><div class="markdown"><p>Upserts key-map into table on columns in on-conflict.</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(connectable :- db-spec)
 (table :- :keyword)
 (on-conflict :- [:vector :keyword])
 (key-map :- :map)]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>:map
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L57">view source</a></div></div><div class="public anchor" id="var-upsert-multi.21"><h3>upsert-multi!</h3><div class="usage"><code>(upsert-multi! connectable table on-conflict key-maps)</code></div><div class="doc"><div class="markdown"><p>Upserts key-maps into table on columns in on-conflict.</p>
<p><strong>Arg Schemas</strong>:</p>
<pre><code>[(connectable :- db-spec)
 (table :- :keyword)
 (on-conflict :- [:vector :keyword])
 (key-maps :- [:vector :map])]
</code></pre>
<p><strong>Returns</strong>:</p>
<pre><code>[:sequential :map]
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/edenhealth/sqs-worker/blob/main/src/sqs_worker/components/database/interface.clj#L65">view source</a></div></div></div></body></html>